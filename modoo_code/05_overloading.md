# 5. Overloading

## 5-1 내가 만든 연산자 - 연산자 오버로딩

c언어에서 `+, -, ==, []` 와 같은 기본 연산자들을 기본적으로 정의되어 있는 데이터 타입( `int, float` 등) 이외의 타입에서 사용하는 것은 불가하다.
하지만 c++에서는 사용자 정의 연산자를 사용할 수 있다. 정확히 `::` (범위 지정), `.` (멤버 지정) `.*` (멤버 포인터로 멤버 지정)을 제외한 모든 연산자를 사용할 수 있다.

대표적으로 다음과 같다.

- `+, -, *` 와 같은 산술 연산
- `+=. -=` 와 같은 축약형 연산자
- `>=, ==` 와 같은 비교 연산자
- `&&, ||` 와 같은 논리 연산자
- `->` 나 `*` 와 같은 멤버 선택 연산자(여기서 `*` 는 역참조 연산자) 
- `++, --` 증감 연산자
- `[]` (배열 연산자)와 심지어 `()` (함수 호출 연산자)까지

이때, 이러한 기본 연산자들을 직접 사용자가 정의하는 것을 **"연산자를 오버로딩 한다"** 라고 부른다.

### MyString의 '==' 연산자 오버로딩

일단 연산자 오버로딩을 사용하기 위해서는, 다음과 같이 오버로딩을 원하는 연산자 함수를 제작하면 된다.

```c++
(리턴 타입) operator(연산자) (연산자가 받는 인자)
```

> 참고로 위 방법 외에는 함수 이름으로 연산자를 절대 넣을 수 없다.

예를 들어서 `==` 을 오버로딩하고 싶다면, `==` 연산자는 그 결과값이 언제나 `bool` 이고, 인자로는 `==` 로 비교하는 것 하나만 받게 된다.
따라서 다음과 같이 함수를 정의하면 된다.

```c++
bool operator==(MyString& str);
```

이제 우리가 `str1 == str2` 라는 명령을 한다면 이는 `str1.operator==(str2)` 로 내부적으로 변환되서 처리된다.
그리고 그 결과값을 리턴한다. 이를 `compare` 함수를 이용해서 만들면 다음과 같다.

```c++
bool MyString::operator==(MyString& str) {
	return !compare(str); // str과 같으면 compare에서 0을 리턴한다.
}
```

### 복소수 (Complex number) 클래스 만들기

이번엔 복소수를 다루는 클래스를 만든다. 복소수는 실수부와 허수부가 존재하기에 두 개의 수를 가져야 한다.
따라서 기본적으로 복소수 클래스 `Complex` 는 다음고 같이 간단하게 만들 수 있다.

```c++
class Complex {
	private:
	    double real, img;
		
    public:
	    Complex(double real, double img) : real(real), img(img) {}
};
```

이때, 복소수는 실수의 사칙연산과 조금은 다르기에 클래스 차원에서 이를 구현해주어야 한다.
예를 들어 복소수의 덧셈과 곱셈, 나눗셈을 살펴보면 다음과 같다.

$$ z_1 + z_2 = (a_1 + ib_1) + (a_2 + ib_2) = (a_1 + a_2) + i(b_1 + b_2) $$  

$$ z_1z_2 = (a_1 + ib_1)(a_2 + ib_2) = (a_1a_2 - b_1b_2) + i(a_1b_2 + a_2b_1) $$

$$ \frac{z_1}{z_2} = \frac{a_1 + ib_1}{a_2+ib_2} = \frac{(a_1+ib_1)(a_2-ib_2)}{{a_2^2}+{b_2^2}} = \frac{a_1a_2+b_1b_2+i(a_2b_1-a_1b_2)}{{a_2^2}+{b_2^2}} $$






























